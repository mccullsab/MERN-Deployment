{"ast":null,"code":"import _slicedToArray from\"/Users/abbymcculloch/Documents/Coding Dojo/mern/full_stack_mern/mern_belt_exam/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{useParams,useNavigate,Link}from'react-router-dom';import StoreForm from'../components/StoreForm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdatePage=function UpdatePage(){var nav=useNavigate();var _useParams=useParams(),id=_useParams.id;// removed the empty dictionary in oneStore state for image url to appear in \nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),oneStore=_useState2[0],setOneStore=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),formErrors=_useState4[0],setFormErrors=_useState4[1];useEffect(function(){axios.get(\"http://localhost:8000/api/stores/\".concat(id)).then(function(res){var store=res.data.store;// console.log(res);\n// for (var i=0; i < 1000000000; i++){\n//     let x = i*i;\n// }\nsetOneStore(store);}).catch(function(err){return console.log(err);});},[]);var updateStore=function updateStore(storeToUpdate){axios.put(\"http://localhost:8000/api/stores/\".concat(id),storeToUpdate).then(function(results){console.log(results);nav(\"/\");}).catch(function(err){console.log(err);var errorResponse=err.response.data.error.errors;var errorArr=[];for(var key in errorResponse){errorArr.push(errorResponse[key].message);setFormErrors(errorArr);}});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Edit this store:\"}),oneStore&&/*#__PURE__*/_jsx(StoreForm,{useForm:updateStore,store:oneStore}),formErrors&&formErrors.map(function(val,i){return/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:val});})]});};export default UpdatePage;","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","useNavigate","Link","StoreForm","jsx","_jsx","jsxs","_jsxs","UpdatePage","nav","_useParams","id","_useState","_useState2","_slicedToArray","oneStore","setOneStore","_useState3","_useState4","formErrors","setFormErrors","get","concat","then","res","store","data","catch","err","console","log","updateStore","storeToUpdate","put","results","errorResponse","response","error","errors","errorArr","key","push","message","children","useForm","map","val","i","className"],"sources":["/Users/abbymcculloch/Documents/Coding Dojo/mern/full_stack_mern/mern_belt_exam/client/src/views/UpdatePage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams, useNavigate, Link } from 'react-router-dom'\n\nimport StoreForm from '../components/StoreForm';\n\nconst UpdatePage = () => {\n    const nav = useNavigate();\n    const { id } = useParams();\n    // removed the empty dictionary in oneStore state for image url to appear in \n    const [oneStore, setOneStore] = useState();\n    const [formErrors, setFormErrors] = useState([]);\n\n    useEffect(() => {\n        axios\n            .get(`http://localhost:8000/api/stores/${id}`)\n            .then((res) => {\n                const store = res.data.store\n                // console.log(res);\n                // for (var i=0; i < 1000000000; i++){\n                //     let x = i*i;\n                // }\n                setOneStore(store);\n            })\n            .catch((err) => console.log(err))\n    }, [])\n\n    const updateStore = (storeToUpdate) => {\n        axios\n            .put(`http://localhost:8000/api/stores/${id}`, storeToUpdate)\n            .then((results) => {\n                console.log(results)\n                nav(`/`);\n            })\n            .catch((err) => {\n                console.log(err)\n                const errorResponse = err.response.data.error.errors\n                const errorArr = []\n                for(const key in errorResponse){\n                    errorArr.push(errorResponse[key].message)\n                    setFormErrors(errorArr);\n                }\n            })\n    };\n\n\n    return (\n        <div>\n            <p>Edit this store:</p>\n            {/* { oneStore.title !== undefined && */}\n            {oneStore && <StoreForm useForm={updateStore} store={oneStore} />}\n            {formErrors && formErrors.map((val, i) => \n                <p className='text-danger'>{val}</p>)}\n            {/* } */}\n        </div>\n    )\n}\n\nexport default UpdatePage;"],"mappings":"2KAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,WAAW,CAAEC,IAAI,KAAQ,kBAAkB,CAE/D,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEhD,GAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAA,CAAS,CACrB,GAAM,CAAAC,GAAG,CAAGR,WAAW,EAAE,CACzB,IAAAS,UAAA,CAAeV,SAAS,EAAE,CAAlBW,EAAE,CAAAD,UAAA,CAAFC,EAAE,CACV;AACA,IAAAC,SAAA,CAAgCf,QAAQ,EAAE,CAAAgB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,IAAAI,UAAA,CAAoCpB,QAAQ,CAAC,EAAE,CAAC,CAAAqB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAzCE,UAAU,CAAAD,UAAA,IAAEE,aAAa,CAAAF,UAAA,IAEhCpB,SAAS,CAAC,UAAM,CACZC,KAAK,CACAsB,GAAG,qCAAAC,MAAA,CAAqCX,EAAE,EAAG,CAC7CY,IAAI,CAAC,SAACC,GAAG,CAAK,CACX,GAAM,CAAAC,KAAK,CAAGD,GAAG,CAACE,IAAI,CAACD,KAAK,CAC5B;AACA;AACA;AACA;AACAT,WAAW,CAACS,KAAK,CAAC,CACtB,CAAC,CAAC,CACDE,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CACzC,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAG,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIC,aAAa,CAAK,CACnCjC,KAAK,CACAkC,GAAG,qCAAAX,MAAA,CAAqCX,EAAE,EAAIqB,aAAa,CAAC,CAC5DT,IAAI,CAAC,SAACW,OAAO,CAAK,CACfL,OAAO,CAACC,GAAG,CAACI,OAAO,CAAC,CACpBzB,GAAG,KAAK,CACZ,CAAC,CAAC,CACDkB,KAAK,CAAC,SAACC,GAAG,CAAK,CACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChB,GAAM,CAAAO,aAAa,CAAGP,GAAG,CAACQ,QAAQ,CAACV,IAAI,CAACW,KAAK,CAACC,MAAM,CACpD,GAAM,CAAAC,QAAQ,CAAG,EAAE,CACnB,IAAI,GAAM,CAAAC,GAAG,GAAI,CAAAL,aAAa,CAAC,CAC3BI,QAAQ,CAACE,IAAI,CAACN,aAAa,CAACK,GAAG,CAAC,CAACE,OAAO,CAAC,CACzCtB,aAAa,CAACmB,QAAQ,CAAC,CAC3B,CACJ,CAAC,CAAC,CACV,CAAC,CAGD,mBACIhC,KAAA,QAAAoC,QAAA,eACItC,IAAA,MAAAsC,QAAA,CAAG,kBAAgB,EAAI,CAEtB5B,QAAQ,eAAIV,IAAA,CAACF,SAAS,EAACyC,OAAO,CAAEb,WAAY,CAACN,KAAK,CAAEV,QAAS,EAAG,CAChEI,UAAU,EAAIA,UAAU,CAAC0B,GAAG,CAAC,SAACC,GAAG,CAAEC,CAAC,qBACjC1C,IAAA,MAAG2C,SAAS,CAAC,aAAa,CAAAL,QAAA,CAAEG,GAAG,EAAK,GAAC,GAEvC,CAEd,CAAC,CAED,cAAe,CAAAtC,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}