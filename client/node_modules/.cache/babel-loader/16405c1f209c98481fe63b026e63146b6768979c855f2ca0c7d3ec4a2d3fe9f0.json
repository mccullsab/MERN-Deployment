{"ast":null,"code":"var _jsxFileName = \"/Users/abbymcculloch/Documents/Coding Dojo/mern/full_stack_mern/mern_belt_exam/client/src/views/UpdatePage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport StoreForm from '../components/StoreForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UpdatePage = () => {\n  _s();\n  const nav = useNavigate();\n  const {\n    id\n  } = useParams();\n  // removed the empty dictionary in oneStore state for image url to appear in \n  const [oneStore, setOneStore] = useState();\n  const [formErrors, setFormErrors] = useState([]);\n  useEffect(() => {\n    axios.get(`http://localhost:8000/api/stores/${id}`).then(res => {\n      const store = res.data.store;\n      // console.log(res);\n      // for (var i=0; i < 1000000000; i++){\n      //     let x = i*i;\n      // }\n      setOneStore(store);\n    }).catch(err => console.log(err));\n  }, []);\n  const updateStore = storeToUpdate => {\n    axios.put(`http://localhost:8000/api/stores/${id}`, storeToUpdate).then(results => {\n      console.log(results);\n      nav(`/`);\n    }).catch(err => {\n      console.log(err);\n      const errorResponse = err.response.data.error.errors;\n      const errorArr = [];\n      for (const key in errorResponse) {\n        errorArr.push(errorResponse[key].message);\n        setFormErrors(errorArr);\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Edit this store:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), oneStore && /*#__PURE__*/_jsxDEV(StoreForm, {\n      useForm: updateStore,\n      store: oneStore\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 26\n    }, this), formErrors && formErrors.map((val, i) => /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-danger\",\n      children: val\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n};\n_s(UpdatePage, \"OFAolwPwZ2/g1ktbAWP+pattZEw=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = UpdatePage;\nexport default UpdatePage;\nvar _c;\n$RefreshReg$(_c, \"UpdatePage\");","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","useNavigate","Link","StoreForm","jsxDEV","_jsxDEV","UpdatePage","_s","nav","id","oneStore","setOneStore","formErrors","setFormErrors","get","then","res","store","data","catch","err","console","log","updateStore","storeToUpdate","put","results","errorResponse","response","error","errors","errorArr","key","push","message","children","fileName","_jsxFileName","lineNumber","columnNumber","useForm","map","val","i","className","_c","$RefreshReg$"],"sources":["/Users/abbymcculloch/Documents/Coding Dojo/mern/full_stack_mern/mern_belt_exam/client/src/views/UpdatePage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams, useNavigate, Link } from 'react-router-dom'\n\nimport StoreForm from '../components/StoreForm';\n\nconst UpdatePage = () => {\n    const nav = useNavigate();\n    const { id } = useParams();\n    // removed the empty dictionary in oneStore state for image url to appear in \n    const [oneStore, setOneStore] = useState();\n    const [formErrors, setFormErrors] = useState([]);\n\n    useEffect(() => {\n        axios\n            .get(`http://localhost:8000/api/stores/${id}`)\n            .then((res) => {\n                const store = res.data.store\n                // console.log(res);\n                // for (var i=0; i < 1000000000; i++){\n                //     let x = i*i;\n                // }\n                setOneStore(store);\n            })\n            .catch((err) => console.log(err))\n    }, [])\n\n    const updateStore = (storeToUpdate) => {\n        axios\n            .put(`http://localhost:8000/api/stores/${id}`, storeToUpdate)\n            .then((results) => {\n                console.log(results)\n                nav(`/`);\n            })\n            .catch((err) => {\n                console.log(err)\n                const errorResponse = err.response.data.error.errors\n                const errorArr = []\n                for(const key in errorResponse){\n                    errorArr.push(errorResponse[key].message)\n                    setFormErrors(errorArr);\n                }\n            })\n    };\n\n\n    return (\n        <div>\n            <p>Edit this store:</p>\n            {/* { oneStore.title !== undefined && */}\n            {oneStore && <StoreForm useForm={updateStore} store={oneStore} />}\n            {formErrors && formErrors.map((val, i) => \n                <p className='text-danger'>{val}</p>)}\n            {/* } */}\n        </div>\n    )\n}\n\nexport default UpdatePage;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,EAAEC,WAAW,EAAEC,IAAI,QAAQ,kBAAkB;AAE/D,OAAOC,SAAS,MAAM,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhD,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAMC,GAAG,GAAGP,WAAW,EAAE;EACzB,MAAM;IAAEQ;EAAG,CAAC,GAAGT,SAAS,EAAE;EAC1B;EACA,MAAM,CAACU,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,EAAE;EAC1C,MAAM,CAACe,UAAU,EAAEC,aAAa,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EAEhDC,SAAS,CAAC,MAAM;IACZC,KAAK,CACAe,GAAG,CAAE,oCAAmCL,EAAG,EAAC,CAAC,CAC7CM,IAAI,CAAEC,GAAG,IAAK;MACX,MAAMC,KAAK,GAAGD,GAAG,CAACE,IAAI,CAACD,KAAK;MAC5B;MACA;MACA;MACA;MACAN,WAAW,CAACM,KAAK,CAAC;IACtB,CAAC,CAAC,CACDE,KAAK,CAAEC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAAC;EACzC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMG,WAAW,GAAIC,aAAa,IAAK;IACnCzB,KAAK,CACA0B,GAAG,CAAE,oCAAmChB,EAAG,EAAC,EAAEe,aAAa,CAAC,CAC5DT,IAAI,CAAEW,OAAO,IAAK;MACfL,OAAO,CAACC,GAAG,CAACI,OAAO,CAAC;MACpBlB,GAAG,CAAE,GAAE,CAAC;IACZ,CAAC,CAAC,CACDW,KAAK,CAAEC,GAAG,IAAK;MACZC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAChB,MAAMO,aAAa,GAAGP,GAAG,CAACQ,QAAQ,CAACV,IAAI,CAACW,KAAK,CAACC,MAAM;MACpD,MAAMC,QAAQ,GAAG,EAAE;MACnB,KAAI,MAAMC,GAAG,IAAIL,aAAa,EAAC;QAC3BI,QAAQ,CAACE,IAAI,CAACN,aAAa,CAACK,GAAG,CAAC,CAACE,OAAO,CAAC;QACzCrB,aAAa,CAACkB,QAAQ,CAAC;MAC3B;IACJ,CAAC,CAAC;EACV,CAAC;EAGD,oBACI1B,OAAA;IAAA8B,QAAA,gBACI9B,OAAA;MAAA8B,QAAA,EAAG;IAAgB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAI,EAEtB7B,QAAQ,iBAAIL,OAAA,CAACF,SAAS;MAACqC,OAAO,EAAEjB,WAAY;MAACN,KAAK,EAAEP;IAAS;MAAA0B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAG,EAChE3B,UAAU,IAAIA,UAAU,CAAC6B,GAAG,CAAC,CAACC,GAAG,EAAEC,CAAC,kBACjCtC,OAAA;MAAGuC,SAAS,EAAC,aAAa;MAAAT,QAAA,EAAEO;IAAG;MAAAN,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAK,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAEvC;AAEd,CAAC;AAAAhC,EAAA,CAlDKD,UAAU;EAAA,QACAL,WAAW,EACRD,SAAS;AAAA;AAAA6C,EAAA,GAFtBvC,UAAU;AAoDhB,eAAeA,UAAU;AAAC,IAAAuC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}